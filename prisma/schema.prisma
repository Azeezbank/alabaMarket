generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String              @id @default(uuid()) @db.Uuid
  email              String?             @unique
  phone              String?             @unique
  password           String?
  otp                String?
  expiresAt          DateTime?
  sign_up_verify     Boolean             @default(false)
  createdAt          DateTime            @default(now())
  updatedAt DateTime @updatedAt @default(now())
  product            Product[]
  profile            Profile?
  productReview      ProductReview[]
  sellerShop         SellerShop[]
  sellerVerification SellerVerification?
  comment            Comment[]
  notification       Notification[]
  likes              Likes[]
  sellerRating       SellerRating[]      @relation("SellerRatings")
  customerRatings    SellerRating[]      @relation("CustomerRatings")
  storeActivities    StoreActivities[]
  savedProducts      SavedProducts[]
  question           Question[]
  love               Love[]
  sentMessages       Chat[]              @relation("SentMessages")
  receivedMessages   Chat[]              @relation("ReceivedMessages")
  activities         Activities[]
  boostAd            BoostAd[]
}

model SubAdmin {
  id String @id @default(uuid()) @db.Uuid
}

model Profile {
  id          String      @id @default(uuid()) @db.Uuid
  name        String?
  profile_pic String?
  userId      String      @unique @db.Uuid
  user        User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  role        ProfileRole @default(Buyer)
  status      String?
  isVerified  Boolean     @default(false)
}

enum ProfileRole {
  Buyer
  Seller
  Admin
}

model Product {
  id               String           @id @default(uuid()) @db.Uuid
  name             String?
  userId           String           @db.Uuid
  promoted         Boolean          @default(false)
  isActive         Boolean          @default(true)
  pricingStatus    ProductpricingStatus          @default(Pending)
  isPause          Boolean          @default(false)
  shopId           String           @db.Uuid
  categoryId       String?          @db.Uuid
  listingPromotion ProductListingPromotion   @default(Free)
  productPhoto     ProductPhoto[]
  productVideo     ProductVideo[]
  productPricing   ProductPricing?
  productCategory  ProductCategory?
  comment          Comment[]
  shop             SellerShop       @relation(fields: [shopId], references: [id], onDelete: Cascade)
  createdAt        DateTime         @default(now())
  updatedAt DateTime @updatedAt @default(now())
  likes            Likes[]
  boostAd          BoostAd[]
  category         Category?        @relation(fields: [categoryId], references: [id])
  user             User             @relation(fields: [userId], references: [id])
  productReview    ProductReview[]
  savedProducts    SavedProducts[]
  love             Love[]
  listingRejection    ListingRejection[]

  //Pending
  power    String?
  warranty String?
  location String?
}

enum ProductpricingStatus {
  Approved
  Pending
  Rejected
}
enum ProductListingPromotion {
  Free
  Paid
}

model SavedProducts {
  id        String   @id @default(uuid()) @db.Uuid
  userId    String   @db.Uuid
  productId String   @db.Uuid
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
  user      User     @relation(fields: [userId], references: [id])
  product   Product  @relation(fields: [productId], references: [id])

  @@unique([userId, productId])
}

model Category {
  id              String            @id @default(uuid()) @db.Uuid
  image           String?
  name            String?
  createdAt       DateTime          @default(now())
  updatedAt DateTime @updatedAt @default(now())
  product         Product[]
  productCategory ProductCategory[]
}

model ProductCategory {
  id           String   @id @default(uuid()) @db.Uuid
  productId    String   @unique @db.Uuid
  mainCategory String
  categoryId   String   @db.Uuid
  subCategory  String
  createdAt    DateTime @default(now())
  product      Product  @relation(fields: [productId], references: [id])
  category     Category @relation(fields: [categoryId], references: [id])
  updatedAt DateTime @updatedAt @default(now())
}

model ProductPhoto {
  id        String   @id @default(uuid()) @db.Uuid
  url       String? // image URL or path
  productId String   @db.Uuid
  product   Product  @relation(fields: [productId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
}

model ProductVideo {
  id        String   @id @default(uuid()) @db.Uuid
  productId String   @db.Uuid
  url       String?
  product   Product  @relation(fields: [productId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
}

model ProductPricing {
  id          String   @id @default(uuid()) @db.Uuid
  productId   String   @unique @db.Uuid
  price       Decimal  @default(0.00) @db.Decimal(10, 2)
  priceStatus String?
  condition   String
  description String?
  createdAt   DateTime @default(now())
  product     Product  @relation(fields: [productId], references: [id])
  updatedAt DateTime @updatedAt @default(now())
}

model SellerRating {
  id         String   @id @default(uuid()) @db.Uuid
  rating     Int
  comment    String
  customerId String   @db.Uuid
  userId     String   @db.Uuid
  createdAt  DateTime @default(now())
  user       User     @relation("SellerRatings", fields: [userId], references: [id])
  customer   User     @relation("CustomerRatings", fields: [customerId], references: [id])
  updatedAt DateTime @updatedAt @default(now())
}

model ProductReview {
  id        String   @id @default(uuid()) @db.Uuid
  stars     Int?     @db.SmallInt
  comment   String?
  productId String   @unique @db.Uuid
  product   Product  @relation(fields: [productId], references: [id])
  userId    String   @db.Uuid
  user      User     @relation(fields: [userId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())

  @@unique([userId, productId])
}

model Comment {
  id        String   @id @default(uuid()) @db.Uuid
  content   String
  productId String   @db.Uuid
  userId    String   @db.Uuid
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])
  product   Product  @relation(fields: [productId], references: [id])
  updatedAt DateTime @updatedAt @default(now())
}

model Likes {
  id        String   @id @default(uuid()) @db.Uuid
  createdAt DateTime @default(now())
  userId    String   @unique @db.Uuid
  user      User     @relation(fields: [userId], references: [id])
  productId String   @unique @db.Uuid
  product   Product  @relation(fields: [productId], references: [id])
  updatedAt DateTime @updatedAt @default(now())

  @@unique([userId, productId])
}

model Love {
  id        String   @id @default(uuid()) @db.Uuid
  createdAt DateTime @default(now())
  userId    String   @unique @db.Uuid
  user      User     @relation(fields: [userId], references: [id])
  productId String   @unique @db.Uuid
  product   Product  @relation(fields: [productId], references: [id])
  updatedAt DateTime @updatedAt @default(now())

  @@unique([userId, productId])
}

model Notification {
  id         String   @id @default(uuid()) @db.Uuid
  userId     String   @db.Uuid
  message    String?
  receiverId String?  @db.Uuid
  type       String
  isRead     Boolean  @default(false)
  isActive   Boolean  @default(true)
  createdAt  DateTime @default(now())
  user       User     @relation(fields: [userId], references: [id])
  updatedAt DateTime @updatedAt @default(now())
}

model SellerShop {
  id           String    @id @default(uuid()) @db.Uuid
  storeName    String?
  logo         String?
  description  String?
  storeAddress String?
  most_sell    String?
  storeEmail   String?
  phoneNumber  String?
  userId       String    @unique @db.Uuid
  isActive     Boolean   @default(true)
  product      Product[]
  user         User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt    DateTime  @default(now())
  updatedAt DateTime @updatedAt @default(now())
}

model SellerVerification {
  id         String   @id @default(uuid()) @db.Uuid
  userId     String   @unique @db.Uuid
  ID_card    String?
  selfie     String?
  terms      Boolean  @default(false)
  isVerified Boolean  @default(false)
  user       User     @relation(fields: [userId], references: [id])
  createdAt  DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
}

model BoostAd {
  id          String   @id @default(uuid()) @db.Uuid
  productId   String   @unique @db.Uuid
  userId      String?  @db.Uuid
  productName String?
  plan        String?
  period      String
  price       Decimal  @default(0.00) @db.Decimal(10, 2)
  status      BoostAdStatus   @default(Pending)
  startDate    DateTime?
  endDate     DateTime?
  product     Product  @relation(fields: [productId], references: [id])
  user     User?  @relation(fields: [userId], references: [id])
  updatedAt   DateTime @updatedAt @default(now())
  createdAt    DateTime   @default(now())
}

enum BoostAdStatus {
  Active
  Pending
  Suspended
  Paused
}

model BoostPackages {
  id        String   @id @default(uuid()) @db.Uuid
  plan      String
  weekly    Decimal  @default(0.00) @db.Decimal(10, 2)
  monthly   Decimal  @default(0.00) @db.Decimal(10, 2)
  annually  Decimal  @default(0.00) @db.Decimal(10, 2)
  status   BoostPackagesStatus  @default(Active)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
}

enum BoostPackagesStatus {
  Active
  Inactive
}

model StoreActivities {
  id           String   @id @default(uuid()) @db.Uuid
  activityType String?
  description  String
  userId       String   @unique @db.Uuid
  createdAt    DateTime @default(now())
  user         User     @relation(fields: [userId], references: [id])
  updatedAt DateTime @updatedAt @default(now())
}

model Activities {
  id        String   @id @default(uuid()) @db.Uuid
  userId    String   @db.Uuid
  activity  String
  created   DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
  user      User     @relation(fields: [userId], references: [id])
}

model Report {
  id          String   @id @default(uuid()) @db.Uuid
  productId   String   @db.Uuid
  userId      String   @db.Uuid
  reason      String?
  description String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt @default(now())
}

model Question {
  id         String         @id @default(uuid()) @db.Uuid
  userId     String         @db.Uuid
  receiverId String?        @db.Uuid
  question   String
  status     QuestionStatus @default(Pending)
  user       User           @relation(fields: [userId], references: [id])
  updatedAt DateTime @updatedAt @default(now())
}

enum QuestionStatus {
  Pending
  Answered
}

model Chat {
  id         String   @id @default(uuid()) @db.Uuid
  senderId   String      @db.Uuid
  receiverId String      @db.Uuid
  content    String?
  isRead     Boolean  @default(false)
  createdAt  DateTime @default(now())
  sender     User     @relation("SentMessages", fields: [senderId], references: [id])
  receiver   User     @relation("ReceivedMessages", fields: [receiverId], references: [id])
  updatedAt DateTime @updatedAt @default(now())
}

model ListingRejection {
  id        String   @id @default(uuid())  @db.Uuid
  reason    String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
  product   Product  @relation(fields: [productId], references: [id])
  productId String     @db.Uuid
}

model PromoBannerMgt {
  id        String   @id @default(uuid())  @db.Uuid
  image    String?
  title     String
  page     String
  placement     String
  uploadedBy       String?
  startDate    DateTime?
  endDate      DateTime?
  status      PromoBannerMgtStatus
  createdAt     DateTime  @default(now())
}

enum PromoBannerMgtStatus {
  Active
  Expire
  Suspended
  Inactive
}