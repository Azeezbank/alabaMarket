generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String              @id @default(uuid()) @db.Uuid
  email              String?             @unique
  phone              String?             @unique
  password           String?
  otp                String?
  expiresAt          DateTime?
  sign_up_verify     Boolean             @default(false)
  createdAt          DateTime            @default(now())
  product            Product[]
  savedItems         Product[]           @relation("SavedProducts")
  profile            Profile?
  reviews            ProductReview[]
  sellerShop               SellerShop[]
  sellerVerification SellerVerification?
  comment            Comment[]
  notification       Notification[]
  like               Like[]
  sellerRating       SellerRating[]    @relation("SellerRatings")
  customerRatings    SellerRating[]   @relation("CustomerRatings")
  storeActivities      StoreActivities[]
}

model SubAdmin {
  id       String              @id @default(uuid()) @db.Uuid
}

model Profile {
  id          String  @id @default(uuid()) @db.Uuid
  name        String?
  profile_pic String?
  userId      String  @unique @db.Uuid
  user        User    @relation(fields: [userId], references: [id], onDelete: Cascade)
  role        String  @default("Buyer")
  status      String?
  isVerified  Boolean   @default(false)
}

model Product {
  id              String          @id @default(uuid()) @db.Uuid
  name            String?
  userId          String    @db.Uuid
  promoted        Boolean         @default(false)
  isActive        Boolean         @default(true)
  pricingStatus          String?         @default("Pending")
  isPause         Boolean         @default(false)
  shopId          String      @db.Uuid
  listingPromotion       String?
  productPhoto          ProductPhoto[]
  productVideo           ProductVideo[]
  productPricing         ProductPricing?
  productCategory ProductCategory?
  comment         Comment[]
  shop            SellerShop      @relation(fields: [shopId], references: [id], onDelete: Cascade)
  createdAt       DateTime        @default(now())
  updatedAt       DateTime        @updatedAt
  seller          User            @relation(fields: [userId], references: [id])
  likes           Like[]
  boostAd       BoostAd[]

  //Pending
  power      String?
  warranty   String?
  location   String?
  reviews    ProductReview?
  savedBy    User[]         @relation("SavedProducts")
}

model Category {
  id    String    @id   @default(uuid())   @db.Uuid
  image     String?
  name      String?
  createdAt   DateTime    @default(now())
  productCategory    ProductCategory[]
}

model ProductCategory {
  id           String   @id @default(uuid())    @db.Uuid
  productId    String     @unique    @db.Uuid
  mainCategory String
  categoryId    String    @db.Uuid
  subCategory  String
  createdAt    DateTime @default(now())
  product      Product  @relation(fields: [productId], references: [id])
  category     Category     @relation(fields: [categoryId], references: [id])
}

model ProductPhoto {
  id        String   @id @default(uuid()) @db.Uuid
  url       String? // image URL or path
  productId String      @db.Uuid
  product   Product  @relation(fields: [productId], references: [id])
  createdAt DateTime @default(now())
}

model ProductVideo {
  id        String   @id @default(uuid())    @db.Uuid
  productId String     @db.Uuid
  url       String?
  product   Product  @relation(fields: [productId], references: [id])
  createdAt DateTime @default(now())
}

model ProductPricing {
  id          String   @id @default(uuid())       @db.Uuid
  productId   String   @unique  @db.Uuid
  price       Decimal  @default(0.00) @db.Decimal(10, 2)
  priceStatus String?
  condition   String?
  description String?
  createdAt   DateTime @default(now())
  product     Product  @relation(fields: [productId], references: [id])
}

model SellerRating {
  id        String   @id @default(uuid()) @db.Uuid
  rating     Int
  comment     String
  customerId     String  @db.Uuid
  userId      String     @db.Uuid
  createdAt    DateTime    @default(now())
  user   User    @relation("SellerRatings", fields: [userId], references: [id])
   customer   User    @relation("CustomerRatings", fields: [customerId], references: [id])
}

model ProductReview {
  id        String   @id @default(uuid()) @db.Uuid
  rating    Int // 1 to 5 stars
  comment   String?
  productId String   @unique    @db.Uuid
  product   Product  @relation(fields: [productId], references: [id])
  userId    String    @db.Uuid
  user      User     @relation(fields: [userId], references: [id])
  createdAt DateTime @default(now())
}

model Comment {
  id        String   @id @default(uuid()) @db.Uuid
  content   String
  productId String   @db.Uuid
  userId    String    @db.Uuid
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])
  product   Product  @relation(fields: [productId], references: [id])
}

model Like {
  id        String   @id @default(uuid()) @db.Uuid
  createdAt DateTime @default(now())
  userId    String    @db.Uuid
  user      User     @relation(fields: [userId], references: [id])
  productId String    @db.Uuid
  product   Product  @relation(fields: [productId], references: [id])

  @@unique([userId, productId])
}

model Notification {
  id         String   @id @default(uuid()) @db.Uuid
  userId     String    @db.Uuid
  message    String?
  receiverId String?      @db.Uuid
  type       String?
  isRead     Boolean  @default(false)
  isActive   Boolean  @default(true)
  createdAt  DateTime @default(now())
  user       User     @relation(fields: [userId], references: [id])
}

model SellerShop {
  id           String    @id @default(uuid()) @db.Uuid
  storeName    String?
  logo         String?
  description  String?
  storeAddress String?
  most_sell    String?
  storeEmail   String?
  phoneNumber  String?
  userId       String    @unique   @db.Uuid
  isActive     Boolean   @default(true)
  product      Product[]
  user         User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt    DateTime  @default(now())
}

model SellerVerification {
  id         String   @id @default(uuid())    @db.Uuid
  userId     String   @unique    @db.Uuid
  ID_card    String?
  selfie     String?
  terms      Boolean  @default(false)
  isVerified Boolean  @default(false)
  user       User     @relation(fields: [userId], references: [id])
  createdAt  DateTime @default(now())
}

model BoostAd {
  id            String     @id @default(uuid())   @db.Uuid
  productId     String     @unique @db.Uuid
  productName    String?
  plan       String?
  period         String
  price         Decimal   @default(0.00)   @db.Decimal(10, 2)
  product       Product     @relation(fields: [productId], references: [id])
}

model BoostPackages {
  id             String       @id @default(uuid())   @db.Uuid
  plan         String
  weekly      Decimal   @default(0.00)  @db.Decimal(10, 2)
  monthly      Decimal   @default(0.00)  @db.Decimal(10, 2)
  annually     Decimal   @default(0.00)  @db.Decimal(10, 2)
  createdAt    DateTime   @default(now())
}

model StoreActivities {
 id             String       @id @default(uuid())   @db.Uuid
 activityType     String?
 description     String
 userId        String      @unique    @db.Uuid
 createdAt   DateTime    @default(now())
 user      User  @relation(fields: [userId], references: [id])
}